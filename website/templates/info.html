{% extends "base.html" %}

{% block title %}Information{% endblock %}

{% block content %}

<style>
  body {
      background: linear-gradient(-45deg, #ffffff, #fdf5e6, #faebd7, #f5deb3);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
        font-family: "Poppins", sans-serif;
        color: #000000;
        height: 100vh;
    }

    @keyframes gradient {
        0% {
            background-position: 0% 50%;
        }
    
        50% {
            background-position: 100% 50%;
        }
    
        100% {
            background-position: 0% 50%;
        }
    }
  h1, h3, h4 {
    font-weight: 700;
    text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
  }
  h1 {
    font-size: 3rem;
  }
  h3 {
    font-size: 1.5rem;
  }
  h4 {
    font-size: 1.2rem;
  }
  #notes {
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    overflow: hidden;
    margin-top: 20px;
  }
  .list-group-item {
    background-color: rgba(255, 255, 255, 0.1);
    color: #000000;
    border: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
  }
  .list-group-item:last-child {
    border-bottom: none;
  }
  .list-group-item:hover {
    background-color: rgba(255, 255, 255, 0.3);
    transform: scale(1.02);
  }
  .close {
    color: #000000;
    opacity: 0.7;
    font-size: 1.5rem;
    transition: opacity 0.3s ease;
  }
  .close:hover {
    opacity: 1;
  }
  form {
    background-color: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    margin-top: 20px;
  }
  textarea {
    background-color: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 8px;
    color: #000000;
    padding: 10px;
    font-size: 1rem;
    resize: none;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3);
    width: 100%;
    height: 300px;
  }
  textarea:focus {
    outline: none;
    background-color: rgba(255, 255, 255, 0.3);
  }
  button {
    font-size: 1rem;
    font-weight: 700;
    background-color: #0e70b7;
    border: none;
    border-radius: 50px;
    padding: 10px 30px;
    color: #ffffff;
    transition: background-color 0.3s ease, transform 0.2s ease;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
  }
  button:hover {
    background-color: #3bff55;
    transform: scale(1.05);
  }
</style>

<form method="POST">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Info Page</title>
        <style>
            select, input[type="text"], input[type="password"], button {
                padding: 10px;
                margin: 10px 0;
                font-size: 16px;
                width: 100%;
            }
            button {
                cursor: pointer;
            }
        </style>
    </head>
    <body>

        <h1 class="text-center mb-5">Cadet Information</h1>

        <form method="POST">
            <label for="classYearDropdown">Cadet Group:</label>
            <select id="group" class="rounded-pill shadow-sm border-primary"  name="group" required>
                <option value="" disabled {% if not info or not info.group %}selected{% endif %}>Select a group</option>
                {% for i in range(1, 5) %}
                <option value="{{ i }}" {% if info and info.group == i|string %}selected{% endif %}>Group {{ i }}</option>
                {% endfor %}
            </select>

            <label for="squadron">Squadron:</label>
            <select id="squadron" class="rounded-pill shadow-sm border-primary" name="squadron" required>
                <option value="" disabled selected>Select a group first</option>
            </select>

            <label for="flight-staff">Flight/Staff:</label>
            <select id="flight-staff" class="rounded-pill shadow-sm border-primary" name="flight-staff" required>
                <option value="" disabled {% if not info or not info.flight %}selected{% endif %}>Select Flight/Staff</option>
                <option value="Alpha" {% if info and info.flight == "Alpha" %}selected{% endif %}>Alpha</option>
                <option value="Bravo" {% if info and info.flight == "Bravo" %}selected{% endif %}>Bravo</option>
                <option value="Charlie" {% if info and info.flight == "Charlie" %}selected{% endif %}>Charlie</option>
                <option value="A1" {% if info and info.flight == "A1" %}selected{% endif %}>A1</option>
                <option value="A2" {% if info and info.flight == "A2" %}selected{% endif %}>A2</option>
                <option value="A3" {% if info and info.flight == "A3" %}selected{% endif %}>A3</option>
                <option value="A4/6" {% if info and info.flight == "A4/6" %}selected{% endif %}>A4/6</option>
                <option value="Stan/Eval" {% if info and info.flight == "Stan/Eval" %}selected{% endif %}>Stan/Eval</option>
                <option value="D&I" {% if info and info.flight == "D&I" %}selected{% endif %}>D&I</option>
                <option value="Character & Honor" {% if info and info.flight == "Character & Honor" %}selected{% endif %}>Character & Honor</option>
                <option value="Analyst" {% if info and info.flight == "Analyst" %}selected{% endif %}>Analyst</option>
                <option value="Cadet Leadership" {% if info and info.flight == "Cadet Leadership" %}selected{% endif %}>Cadet Leadership</option>
            </select>

            <label for="class-year">Class Year:</label>
            <select id="class-year" class="rounded-pill shadow-sm border-primary" name="class-year" required>
                <option value="" disabled {% if not info or not info.class_year %}selected{% endif %}>Select Class Year</option>
                <option value="2025" {% if info and info.class_year == 2025 %}selected{% endif %}>2025</option>
                <option value="2026" {% if info and info.class_year == 2026 %}selected{% endif %}>2026</option>
                <option value="2027" {% if info and info.class_year == 2027 %}selected{% endif %}>2027</option>
                <option value="2028" {% if info and info.class_year == 2028 %}selected{% endif %}>2028</option>
            </select>

        </select>

            <label for="admin-password" >Admin Password:</label>
            <input
                type="password"
                id="admin-password"
                name="admin-password"
                placeholder="Enter admin password"
                class="rounded-pill shadow-sm border-primary"
            />

            <button type="submit">Save</button>
        </form>

        <script>
            // Dynamically populate squadrons based on selected group
            const groupDropdown = document.getElementById('group');
            const squadronDropdown = document.getElementById('squadron');

            groupDropdown.addEventListener('change', function () {
                const group = this.value;
                squadronDropdown.innerHTML = '<option value="" disabled selected>Select a squadron</option>';

                if (group) {
                    const groupNumber = parseInt(group, 10);
                    const startSquadron = (groupNumber - 1) * 10 + 1;
                    const endSquadron = groupNumber * 10;

                    for (let i = startSquadron; i <= endSquadron; i++) {
                        const option = document.createElement('option');
                        option.value = i;
                        option.textContent = i;
                        squadronDropdown.appendChild(option);
                    }
                }
            });

            // Prepopulate squadron if info exists
            window.addEventListener('DOMContentLoaded', () => {
                const preselectedGroup = "{{ info.group if info else '' }}";
                const preselectedSquadron = "{{ info.squadron if info else '' }}";

                if (preselectedGroup && preselectedSquadron) {
                    groupDropdown.value = preselectedGroup;
                    groupDropdown.dispatchEvent(new Event('change')); // Trigger the change event
                    squadronDropdown.value = preselectedSquadron;
                }
            });
        </script>
    </body>
</form>
{% endblock %}